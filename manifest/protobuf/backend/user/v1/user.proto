syntax = "proto3";

package user;

option go_package = "jh_admin_service/api/backend/user/v1";

service User {
    rpc GetUserList(GetUserListReq) returns (GetUserListRes) {}
    rpc UpdateUser(UpdateUserReq) returns (UpdateUserRes) {}
    rpc GetUserBasicInfo(GetUserBasicInfoReq) returns (GetUserBasicInfoRes) {}
    
    // 用户等级相关接口
    rpc GetUserGrades(GetUserGradesReq) returns (GetUserGradesRes) {}
    rpc SaveUserGrades(SaveUserGradesReq) returns (SaveUserGradesRes) {}
    rpc DeleteUserGrades(DeleteUserGradesReq) returns (DeleteUserGradesRes) {}
    
    // 用户登录日志接口
    rpc GetUserLoginLogs(GetUserLoginLogsReq) returns (GetUserLoginLogsRes) {}
}

// 获取用户列表请求
message GetUserListReq {
    int32 grade_id = 1;         // 等级ID (可选)
    int32 level_id = 2;         // 层级ID (可选)
    int32 status = 3;           // 状态 (可选)
    string username = 4;        // 用户名 (可选)
    string realname = 5;        // 真实姓名 (可选)
    string agent_username = 6;  // 代理用户名 (可选)
    string mobile = 7;          // 手机号 (可选)
    int32 page = 8;             // 页码
    int32 size = 9;             // 每页数量
    string sort_field = 10;     // 排序字段 (可选)
    int32 sort_rule = 11;       // 排序规则 1=ASC, 0=DESC (可选)
    string card_no = 12;        // 银行卡号 (可选)
    string domain = 13;         // 注册域名 (可选)
    string start_date = 14;     // 开始日期 (可选)
    string end_date = 15;       // 结束日期 (可选)
    int32 charge = 16;          // 是否首存 1=是, 0=否 (可选)
}

// 用户信息
message UserInfo {
    int32 id = 1;                       // 用户ID
    string username = 2;                // 用户名
    int32 grade_id = 3;                 // 等级ID
    string grade_name = 4;              // 等级名称
    int32 level_id = 5;                 // 层级ID
    string level_name = 6;              // 层级名称
    int32 agent_id = 7;                 // 代理ID
    string agent_username = 8;          // 代理用户名
    int32 status = 9;                   // 状态
    string register_ip = 10;            // 注册IP
    string register_time = 11;          // 注册时间
    string register_url = 12;           // 注册URL
    string last_login_ip = 13;          // 最后登录IP
    string last_login_time = 14;        // 最后登录时间
    string last_login_address = 15;     // 最后登录地址
    string realname = 16;               // 真实姓名
    string mobile = 17;                 // 手机号
    string email = 18;                  // 邮箱
    int32 focus_level = 19;             // 关注级别
    int32 balance_status = 20;          // 资金状态
    string balance = 21;                // 余额
    string balance_frozen = 22;         // 冻结余额
    string points = 23;                 // 积分
    string card_no = 24;                // 银行卡号
    int32 is_online = 25;               // 是否在线
    int32 pay_times = 26;               // 存款次数
}

// 获取用户列表响应
message GetUserListRes {
    repeated UserInfo list = 1;         // 用户列表
    int32 count = 2;                    // 总数量
    int32 total_users = 3;              // 总用户数
    int32 total_charge_users = 4;       // 总充值用户数
}

// 更新用户请求
message UpdateUserReq {
    int32 id = 1;                       // 用户ID
    string login_password = 2;          // 登录密码 (可选)
    string pay_password = 3;            // 资金密码 (可选)
    int32 grade_id = 4;                 // 等级ID
    int32 level_id = 5;                 // 层级ID
    int32 agent_id = 6;                 // 代理ID
    string realname = 7;                // 真实姓名 (可选)
    string mobile = 8;                  // 手机号 (可选)
    string email = 9;                   // 邮箱 (可选)
    string qq = 10;                     // QQ号 (可选)
    string birthday = 11;               // 生日 (可选)
    int32 sex = 12;                     // 性别
    int32 focus_level = 13;             // 关注级别
    int32 balance_status = 14;          // 资金状态
    int32 status = 15;                  // 状态
    string remark = 16;                 // 备注 (可选)
}

// 更新用户响应
message UpdateUserRes {
    bool success = 1;                   // 是否成功
    string message = 2;                 // 响应消息
}

// 获取用户基本信息请求
message GetUserBasicInfoReq {
    int32 id = 1;                       // 用户ID
}

// 用户基本信息
message UserBasicInfo {
    int32 id = 1;                       // 用户ID
    string username = 2;                // 用户名
    string grade_name = 3;              // 等级名称
    string level_name = 4;              // 层级名称
    string balance = 5;                 // 余额
    string register_time = 6;           // 注册时间
    string register_ip = 7;             // 注册IP
    string last_login_ip = 8;           // 最后登录IP
    string last_login_time = 9;         // 最后登录时间
    string last_login_address = 10;     // 最后登录地址
    string agent_name = 11;             // 代理名称
    string realname = 12;               // 真实姓名
    string mobile = 13;                 // 手机号
    string email = 14;                  // 邮箱
    int32 sex = 15;                     // 性别
    string birthday = 16;               // 生日
    string qq = 17;                     // QQ号
    int32 balance_status = 18;          // 资金状态
    int32 focus_level = 19;             // 关注级别
    string remark = 20;                 // 备注
    int32 status = 21;                  // 状态
    string device = 22;                 // 最后登录设备
    int32 is_online = 23;               // 是否在线
    repeated BankInfo banks = 24;       // 银行卡列表
}

// 银行卡信息
message BankInfo {
    string bank_name = 1;               // 银行名称
    string card_no = 2;                 // 银行卡号
}

// 获取用户基本信息响应
message GetUserBasicInfoRes {
    UserBasicInfo user = 1;             // 用户基本信息
}

// ============= 用户等级相关消息定义 =============

// 获取用户等级列表请求
message GetUserGradesReq {
    int32 site_id = 1;  // 站点ID
}

// 用户等级信息
message UserGradeInfo {
    int32 id = 1;                           // 等级ID
    string name = 2;                        // 等级名称
    int32 points_upgrade = 3;               // 升级所需积分
    double bonus_upgrade = 4;               // 升级赠送彩金
    double bonus_birthday = 5;              // 生日彩金
    double rebate_percent_sports = 6;       // 体育返水比例
    double rebate_percent_lottery = 7;      // 彩票返水比例
    double rebate_percent_live = 8;         // 真人视讯返水比例
    double rebate_percent_egame = 9;        // 电子游戏返水比例
    double rebate_percent_poker = 10;       // 扑克返水比例
    int32 user_count = 11;                  // 该等级用户数量
    string fields_disable = 12;             // 禁用字段配置
    string auto_providing = 13;             // 自动发放配置
    repeated string activities = 14;        // 关联活动列表
}

// 获取用户等级列表响应
message GetUserGradesRes {
    int32 code = 1;                         // 响应码
    string message = 2;                     // 响应消息
    repeated UserGradeInfo data = 3;        // 等级列表数据
}

// 保存用户等级请求
message SaveUserGradesReq {
    int32 site_id = 1;                      // 站点ID
    repeated UserGradeInfo data = 2;        // 等级数据列表
    string fields_disable = 3;              // 禁用字段配置
    string auto_providing = 4;              // 自动发放配置
}

// 保存用户等级响应
message SaveUserGradesRes {
    int32 code = 1;                         // 响应码
    string message = 2;                     // 响应消息
}

// 删除用户等级请求
message DeleteUserGradesReq {
    int32 site_id = 1;                      // 站点ID
    int32 id = 2;                           // 等级ID
}

// 删除用户等级响应
message DeleteUserGradesRes {
    int32 code = 1;                         // 响应码
    string message = 2;                     // 响应消息
}

// 获取用户登录日志请求
message GetUserLoginLogsReq {
    string username = 1;        // 用户名 (可选)
    string ip = 2;              // 登录IP (可选)
    string start_time = 3;      // 开始时间 (可选)
    string end_time = 4;        // 结束时间 (可选)
    int32 page = 5;             // 页码
    int32 size = 6;             // 每页数量
}

// 用户登录日志信息
message UserLoginLogInfo {
    int32 id = 1;                       // 日志ID
    int32 user_id = 2;                  // 用户ID
    string username = 3;                // 用户名
    string referer_url = 4;             // 来源网址
    string login_url = 5;               // 登录网址
    string login_time = 6;              // 登录时间
    string login_ip = 7;                // 登录IP
    string login_address = 8;           // 登录地址
    string os = 9;                      // 操作系统
    string network = 10;                // 网络
    string screen = 11;                 // 分辨率
    string browser = 12;                // 浏览器
    string device = 13;                 // 设备类型
    int32 is_robot = 14;                // 是否机器人
    string created_at = 15;             // 创建时间
}

// 获取用户登录日志响应
message GetUserLoginLogsRes {
    repeated UserLoginLogInfo list = 1; // 登录日志列表
    int32 count = 2;                    // 总数量
}